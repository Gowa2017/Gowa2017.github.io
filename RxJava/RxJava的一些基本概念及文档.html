<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="alternate" href="/atom.xml" title="退思园" type="application/atom+xml">
  <meta name="google-site-verification" content="EDvvZZUFkxy_QUzZTaqwsG_9VHqFthY-NhQE4j6WL-s">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: 'LHD9LWONQ3',
      apiKey: '23a113c49e36d8cc93f61239cb530b43',
      indexName: 'gowa.club',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="一直以来都很想在项目中使用这个东西。但是以前没有时间，对 观察者 模式也不太理解。但最终要重新写模块的时候，发现，对于多个网络请求进行合并处理的话，交给 RxJava 是比较简单的，而不用我们自己去在 Handler 进行非常头疼的处理。">
<meta name="keywords" content="Java,Android,RxJava">
<meta property="og:type" content="article">
<meta property="og:title" content="RxJava的一些基本概念及文档">
<meta property="og:url" content="https://gowa.club/RxJava/RxJava的一些基本概念及文档.html">
<meta property="og:site_name" content="退思园">
<meta property="og:description" content="一直以来都很想在项目中使用这个东西。但是以前没有时间，对 观察者 模式也不太理解。但最终要重新写模块的时候，发现，对于多个网络请求进行合并处理的话，交给 RxJava 是比较简单的，而不用我们自己去在 Handler 进行非常头疼的处理。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-04-04T13:27:57.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RxJava的一些基本概念及文档">
<meta name="twitter:description" content="一直以来都很想在项目中使用这个东西。但是以前没有时间，对 观察者 模式也不太理解。但最终要重新写模块的时候，发现，对于多个网络请求进行合并处理的话，交给 RxJava 是比较简单的，而不用我们自己去在 Handler 进行非常头疼的处理。">

<link rel="canonical" href="https://gowa.club/RxJava/RxJava的一些基本概念及文档.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>RxJava的一些基本概念及文档 | 退思园</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-137245514-1"></script>
    <script>
      var host = window.location.hostname;
      if (host !== "localhost" || !true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-137245514-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">退思园</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">烦恼一般都是想太多了。</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-soft">

    <a href="/soft/" rel="section"><i class="fa fa-fw fa-rocket"></i>soft</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input" id="search-input"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

  
</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gowa.club/RxJava/RxJava的一些基本概念及文档.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Gowa2017 Zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="退思园">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          RxJava的一些基本概念及文档
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-04-04 21:27:57" itemprop="dateCreated datePublished" datetime="2019-04-04T21:27:57+08:00">2019-04-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/RxJava/" itemprop="url" rel="index">
                    <span itemprop="name">RxJava</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/RxJava/RxJava的一些基本概念及文档.html#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="RxJava/RxJava的一些基本概念及文档.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>一直以来都很想在项目中使用这个东西。但是以前没有时间，对 <strong>观察者</strong> 模式也不太理解。但最终要重新写模块的时候，发现，对于多个网络请求进行合并处理的话，交给 RxJava 是比较简单的，而不用我们自己去在 Handler 进行非常头疼的处理。</p>
<a id="more"></a>
<p>关于一些理论性的东西可以查看 <a href="http://reactivex.io" target="_blank" rel="noopener">官方文档</a></p>
<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>在编程任务中，我们或多或少都希望点写的代码能够按照我们的编写的顺序执行。但是在 ReactiveX 中，指令可能会并行执行然后 <em>观察者Observer</em> 以任意的顺序捕捉他们的结果。</p>
<p>与调用一个方法不同，我们以 <em>Observables</em> 的形式定义了一个获取和转换数据的机制，然后为其 “订阅” 一个 <em>Observer</em> ：这时，我们之前定义的机制 <em>Observables</em> 就开始动作，而 <em>Observer</em> 也准备好了捕捉其发射的数据并作出响应。</p>
<p>这样做的一个好处是，当我们有一堆的任务需要制定，而彼此之间又互不依赖的时候，我们可以同时启动这些任务，而不是一个一个的去执行————我们所有任务的执行时间只会和其中耗费时间最长的一个相等。</p>
<p>对于描述这种异步编程有很多术语。我们的文档中会使用 </p>
<ul>
<li><strong>Observer subscribe Observables</strong> 观察者 订阅 可观察对象</li>
<li><strong>Observables emits items or send notifications by calling observers’s method</strong> 可观察对象通过调用观察者的方法来发射数据或者通知。<h1 id="Reactive-Streams-基本接口"><a href="#Reactive-Streams-基本接口" class="headerlink" title="Reactive Streams 基本接口"></a>Reactive Streams 基本接口</h1></li>
</ul>
<p>首先我们要明确： Reactive Streams 是一个进行响应式编程的规范，而 RxJava 是 Reactive Streams 2.0 版本一个 Java 实现。有很多语言或者说很多库都对 Reactive Streams 进行了实现。</p>
<p>对于 Reactive Streams 其定义了几个基本的接口：</p>
<ul>
<li><code>Publisher&lt;T&gt;</code> 一个 <em>Publisher</em> 是一个可能无限序列元素的提供者，其根据 <em>Subscriber</em>(S) 的需求进行发布。一个 <em>Publisher</em> 可能会与多个 <em>Subscriber</em> 相关联。</li>
<li><code>Subscriber&lt;T&gt;</code> 当我们提供一个 <em>Subscriber</em>  的实例给 <code>Publisher.subscribe(Subscriber)</code> 的时候，<em>Subscriber</em> 的 <code>onSubscribe(Subscription)</code> 方法会被调用。只有当 <code>Subscription.request(long)</code> 被调用的时候，<em>Subscriber</em> 才会收到通知。</li>
<li><code>Processor&lt;T,R&gt;</code>  <em>Processor</em> 代表了一个处理阶段 ———— 其即是一个 <em>Publisher</em> ，也是一个 <em>Subscriber</em>，并遵守两者的一些约束。</li>
<li><code>Subscription</code> <em>Subscription</em> 表示 <em>Subscriber</em> 与 <em>Publisher</em> 之间一对一的生命周期。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Publisher</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> T&gt; var1)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Subscriber</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(Subscription var1)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onNext</span><span class="params">(T var1)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable var1)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Processor</span>&lt;<span class="title">T</span>, <span class="title">R</span>&gt; <span class="keyword">extends</span> <span class="title">Subscriber</span>&lt;<span class="title">T</span>&gt;, <span class="title">Publisher</span>&lt;<span class="title">R</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Subscription</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">request</span><span class="params">(<span class="keyword">long</span> var1)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">cancel</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Publisher"><a href="#Publisher" class="headerlink" title="Publisher"></a>Publisher</h2><p>在 RxJava 2 中， Flowable 实现了 <em>Publisher</em> 接口。但是对于 <em>Observable, Single, Completable, Maybe</em> 却不是直接的实现了 <em>Publisher</em>。</p>
<h2 id="Subscriber"><a href="#Subscriber" class="headerlink" title="Subscriber"></a>Subscriber</h2><p>当以这种形式 <code>Publisher.subscribe(Subscriber)</code> 执行代码的时候，在 <em>Publisher</em> 和 <em>Subscriber</em> 间有一个 <em>Subscription</em> 作为桥梁进行通信。</p>
<p>一个 <em>Subscriber</em> 必须通过  <code>Subscription.request(long n)</code> 来发送请求信号，然后 <em>Publisher</em> 才会调用  <code>onNext()</code>。</p>
<h2 id="Subscription"><a href="#Subscription" class="headerlink" title="Subscription"></a>Subscription</h2><p><code>Subscription.request(), Subscription.cancel()</code> 必须在 <em>Subscriber</em> 上下文内执行。</p>
<h1 id="工作过程"><a href="#工作过程" class="headerlink" title="工作过程"></a>工作过程</h1><p><code>Publisher.subscribe(Subscriber)</code> 执行过程中，其实内部会有一个 <em>Subscription</em>， <em>Subscriber</em> 持有这个 <em>Subscription</em>，以此来向 <em>Publisher</em> 发送信号。</p>
<h1 id="Observable"><a href="#Observable" class="headerlink" title="Observable"></a>Observable</h1><p>对于 <em>Observable, Single, Completable, Maybe</em> 都不是直接的实现 <em>Publisher</em> ，那么它又是怎么实现的。其实他们实现的是一个与 <em>Publisher</em> 相似的接口：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ObservableSource</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Subscribes the given Observer to this ObservableSource instance.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> observer the Observer, not null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NullPointerException if &#123;<span class="doctag">@code</span> observer&#125; is null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(@NonNull Observer&lt;? <span class="keyword">super</span> T&gt; observer)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SingleSource</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Subscribes the given SingleObserver to this SingleSource instance.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> observer the SingleObserver, not null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NullPointerException if &#123;<span class="doctag">@code</span> observer&#125; is null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(@NonNull SingleObserver&lt;? <span class="keyword">super</span> T&gt; observer)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CompletableSource</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Subscribes the given CompletableObserver to this CompletableSource instance.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> co the CompletableObserver, not null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NullPointerException if &#123;<span class="doctag">@code</span> co&#125; is null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(@NonNull CompletableObserver co)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MaybeSource</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Subscribes the given MaybeObserver to this MaybeSource instance.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> observer the MaybeObserver, not null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NullPointerException if &#123;<span class="doctag">@code</span> observer&#125; is null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(@NonNull MaybeObserver&lt;? <span class="keyword">super</span> T&gt; observer)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Observer</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(@NonNull Disposable var1)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onNext</span><span class="params">(@NonNull T var1)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onError</span><span class="params">(@NonNull Throwable var1)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 所有的 Observable 都要实现 subscribeActual 方法。在这个方法中决定是如何发射数据 使用哪种 Subscription 来通知Subcriber</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Observable</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">ObservableSource</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">subscribeActual</span><span class="params">(Observer&lt;? <span class="keyword">super</span> T&gt; var1)</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>所以，再不用傻傻的疑问，为什么看起来 RxJava 2 很多地方并没有用到定义的几个基本接口了，但是概念是相似的一致的</strong>。</p>
<p>其基本的工作形式是一样的：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Publisher.subscribe(Subscriber&lt;? <span class="keyword">super</span> T&gt; var1);</span><br><span class="line">Observable.subscribe(Observer&lt;? <span class="keyword">super</span> T&gt; observer))</span><br></pre></td></tr></table></figure>
<p>使用 <code>subscribe()</code> 方法，在 发布者与订阅者（可观察对象与观察者）间建立了联系，发布者（可观察对象）会在后续发射数据的时候，通知 订阅者（观察者）。</p>
<h1 id="基本类"><a href="#基本类" class="headerlink" title="基本类"></a>基本类</h1><p><a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="noopener">RxJava的项目地址在这里</a></p>
<p>RxJava 2 的特性由几个基本的类上进行操作来体现：</p>
<ul>
<li>io.reactivex.Flowable: 0..N 流, 支持 Reactive-Streams 和背压</li>
<li>io.reactivex.Observable: 0..N 流,不支持背压</li>
<li>io.reactivex.Single: 只有一项数据或错误的流。</li>
<li>io.reactivex.Completable: 只有一个完成或者错误信号的流</li>
<li>io.reactivex.Maybe:一个没有数据项，或者只有一个项，或只有一个错误的流。</li>
</ul>
<p>根据我的观察， Flowable 实现了 Reactive-Streams 的 Publisher* 接口。</p>
<p>一个例子：</p>
<h1 id="Flowable-例子"><a href="#Flowable-例子" class="headerlink" title="Flowable 例子"></a>Flowable 例子</h1><p>Flowable 实现了 <em>Publisher</em> 接口。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> io.reactivex.functions.Consumer;</span><br><span class="line"></span><br><span class="line">Flowable.just(<span class="string">"Hello world"</span>)</span><br><span class="line">  .subscribe(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">      <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">          System.out.println(s);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>可能会有疑问，不是应该 subscribe(Subcriber) 么，为什么这里是一个 Consumer 呢，其实这只是一个简化而已，最终还是使用了 Subscriber 的。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 可以看到，只有 onNext 是我们定义的 Consumer ，而 onSubscribe 则会弄成了内部的实现 RequestMax.INSTANCE</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Disposable <span class="title">subscribe</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; onNext)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.subscribe(onNext, Functions.ON_ERROR_MISSING, Functions.EMPTY_ACTION, RequestMax.INSTANCE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造了应该 Subscriber  LambdaSubscriber</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Disposable <span class="title">subscribe</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; onNext, Consumer&lt;? <span class="keyword">super</span> Throwable&gt; onError, Action onComplete, Consumer&lt;? <span class="keyword">super</span> Subscription&gt; onSubscribe)</span> </span>&#123;</span><br><span class="line">    ObjectHelper.requireNonNull(onNext, <span class="string">"onNext is null"</span>);</span><br><span class="line">    ObjectHelper.requireNonNull(onError, <span class="string">"onError is null"</span>);</span><br><span class="line">    ObjectHelper.requireNonNull(onComplete, <span class="string">"onComplete is null"</span>);</span><br><span class="line">    ObjectHelper.requireNonNull(onSubscribe, <span class="string">"onSubscribe is null"</span>);</span><br><span class="line">    LambdaSubscriber&lt;T&gt; ls = <span class="keyword">new</span> LambdaSubscriber(onNext, onError, onComplete, onSubscribe);</span><br><span class="line">    <span class="keyword">this</span>.subscribe((FlowableSubscriber)ls);</span><br><span class="line">    <span class="keyword">return</span> ls;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(FlowableSubscriber&lt;? <span class="keyword">super</span> T&gt; s)</span> </span>&#123;</span><br><span class="line">    ObjectHelper.requireNonNull(s, <span class="string">"s is null"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Subscriber&lt;? <span class="keyword">super</span> T&gt; z = RxJavaPlugins.onSubscribe(<span class="keyword">this</span>, s);</span><br><span class="line">        ObjectHelper.requireNonNull(z, <span class="string">"The RxJavaPlugins.onSubscribe hook returned a null FlowableSubscriber. Please check the handler provided to RxJavaPlugins.setOnFlowableSubscribe for invalid null returns. Further reading: https://github.com/ReactiveX/RxJava/wiki/Plugins"</span>);</span><br><span class="line">        <span class="keyword">this</span>.subscribeActual(z);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (NullPointerException var4) &#123;</span><br><span class="line">        <span class="keyword">throw</span> var4;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable var5) &#123;</span><br><span class="line">        Exceptions.throwIfFatal(var5);</span><br><span class="line">        RxJavaPlugins.onError(var5);</span><br><span class="line">        NullPointerException npe = <span class="keyword">new</span> NullPointerException(<span class="string">"Actually not, but can't throw other exceptions due to RS"</span>);</span><br><span class="line">        npe.initCause(var5);</span><br><span class="line">        <span class="keyword">throw</span> npe;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">subscribeActual</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> T&gt; var1)</span></span>;</span><br></pre></td></tr></table></figure>
<p>当我们以 Flowable.just() 的形式建立一个 Flowable 的时候，实际上是返回的是：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">FlowableJust</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">Flowable</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">ScalarCallable</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> T value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FlowableJust</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">subscribeActual</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> T&gt; s)</span> </span>&#123;</span><br><span class="line">        s.onSubscribe(<span class="keyword">new</span> ScalarSubscription(s, <span class="keyword">this</span>.value));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">call</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最终我们真实代码的 实现应该是:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">FlowableJust&lt;String&gt;.subscribeActual(LambdaSubscriber s);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">subscribeActual</span><span class="params">(LambdaSubscriber s)</span> </span>&#123;</span><br><span class="line">    s.onSubscribe(<span class="keyword">new</span> ScalarSubscription(s, <span class="keyword">this</span>.value));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>在这里，就出现了我们用  <em>Subscription(ScalarSubscription)</em> 将 <em>Publisher(FlowableJust)</em> 和 <em>Subscriber(LambdaSubscriber,Consumer)</em> 相关联的事实。</strong></p>
<p>前面说到：</p>
<p><strong>Subscriber</strong> 通过调用 <em>Subscription</em> 的 <code>request()</code> 方法来请求数据。</p>
<p>继续往下查看代码的执行流会发现，确实是这样的:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(Subscription s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (SubscriptionHelper.setOnce(<span class="keyword">this</span>, s)) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.onSubscribe.accept(<span class="keyword">this</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable var3) &#123;</span><br><span class="line">            Exceptions.throwIfFatal(var3);</span><br><span class="line">            s.cancel();</span><br><span class="line">            <span class="keyword">this</span>.onError(var3);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">enum</span> RequestMax implements Consumer&lt;Subscription&gt; &#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">RequestMax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Subscription t)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        t.request(<span class="number">9223372036854775807L</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">request</span><span class="params">(<span class="keyword">long</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (SubscriptionHelper.validate(n)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.compareAndSet(<span class="number">0</span>, <span class="number">1</span>)) &#123;</span><br><span class="line">            Subscriber&lt;? <span class="keyword">super</span> T&gt; s = <span class="keyword">this</span>.subscriber;</span><br><span class="line">            s.onNext(<span class="keyword">this</span>.value);</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.get() != <span class="number">2</span>) &#123;</span><br><span class="line">                s.onComplete();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>总结一下执行流程：</p>
<ol>
<li>Flowable.just() 会返回一个 FlowableJust<string> 对象。</string></li>
<li>Flowable.subscribe(Consumer) 会封装一个 LambdaSubscriber，其中 onSubscribe 会设置为  RequestMax.INSTANCE 此对象的 accept 方法会直接调用 Subscription 的 request 方法。</li>
<li>FlowableJust.subscribeActual(LambdaSubscriber) 会使用 ScalarSubscription 来调用 LambdaSubscriber.onSubscribe() 方法。</li>
<li>调用  ScalarSubscription.accept()，最终，将值直接丢给了 LambdaSubscriber.onSubscribe。</li>
</ol>
<p>事实上关键在于：不同的 发布者 (FlowableJust, FlowableRange …) 会使用不同的 Subscription（ScalarSubscription，FlowableRange.RangeConditionalSubscription())来通知 Subscriber。</p>
<p>Publisher subscribe  Subcriber 过程其实是是 Publisher 以一个 Subcription 作为参数调用  Subcriber 的 onSubscribe 方法。</p>
<h1 id="Observable-例子"><a href="#Observable-例子" class="headerlink" title="Observable 例子"></a>Observable 例子</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Observable.range(<span class="number">1</span>,<span class="number">10</span>).subscribe(<span class="keyword">new</span> Consumer&lt;Integer&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Integer integer)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol>
<li>Observable.range(1,10) 返回 ObservableRange。</li>
<li>ObservableRange 构造 LambdaObserver(onNext, Functions.ON_ERROR_MISSING, Functions.EMPTY_ACTION, Functions.emptyConsumer()）</li>
<li>ObservableRange.subscribeActual(LambdaObserver o) 会使用 ObservableRange.RangeDisposable 来通知 LambdaObserver。<code>LambdaObserver.onSubscribe(ObservableRange.RangeDisposable)</code></li>
<li>ObservableRange.RangeDisposable.run() 开始发射数据。</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">RangeDisposable</span> <span class="keyword">extends</span> <span class="title">BasicIntQueueDisposable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">396518478098735504L</span>;</span><br><span class="line">    <span class="keyword">final</span> Observer&lt;? <span class="keyword">super</span> Integer&gt; downstream;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">long</span> end;</span><br><span class="line">    <span class="keyword">long</span> index;</span><br><span class="line">    <span class="keyword">boolean</span> fused;</span><br><span class="line"></span><br><span class="line">    RangeDisposable(Observer&lt;? <span class="keyword">super</span> Integer&gt; actual, <span class="keyword">long</span> start, <span class="keyword">long</span> end) &#123;</span><br><span class="line">        <span class="keyword">this</span>.downstream = actual;</span><br><span class="line">        <span class="keyword">this</span>.index = start;</span><br><span class="line">        <span class="keyword">this</span>.end = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.fused) &#123;</span><br><span class="line">            Observer&lt;? <span class="keyword">super</span> Integer&gt; actual = <span class="keyword">this</span>.downstream;</span><br><span class="line">            <span class="keyword">long</span> e = <span class="keyword">this</span>.end;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">long</span> i = <span class="keyword">this</span>.index; i != e &amp;&amp; <span class="keyword">this</span>.get() == <span class="number">0</span>; ++i) &#123;</span><br><span class="line">                actual.onNext((<span class="keyword">int</span>)i);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.get() == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.lazySet(<span class="number">1</span>);</span><br><span class="line">                actual.onComplete();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h1 id="Observerable-create"><a href="#Observerable-create" class="headerlink" title="Observerable.create()"></a>Observerable.create()</h1><p>我们再开看一个更通用一些的，底层一些的做法。根据 <a href="http://reactivex.io/documentation/operators/create.html" target="_blank" rel="noopener">Reactivx对于Create操作符的定义</a>。</p>
<p><em>Create</em> 操作符可以让我们以最基本的方式来建立一个 <em>Observable</em>。对操作符 <em>Create</em> 传递一个以 <em>Observer</em> 作为参数的函数。就是这个函数，可以让我们建立的对象看起来就像一个 <em>Observable</em> ————也就是适当的调用 <em>Observer</em> 的 <code>onNext, onError, onCompleted</code> 方法。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@CheckReturnValue</span></span><br><span class="line"> <span class="meta">@NonNull</span></span><br><span class="line"> <span class="meta">@SchedulerSupport</span>(value=<span class="string">"none"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">Observable&lt;T&gt; <span class="title">create</span><span class="params">(ObservableOnSubscribe&lt;T&gt; source)</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;String&gt;() &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;String&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        emitter.onNext(<span class="string">"hello world"</span>);</span><br><span class="line">        emitter.onComplete();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;).subscribe(System.out::println);</span><br></pre></td></tr></table></figure>
<p>查看源码，此方法返回的是一个 ObservableCreate 对象。其以我们实现的 ObservableOnSubscribe 接口（数据发射逻辑）作为参数。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">Observable&lt;T&gt; <span class="title">create</span><span class="params">(ObservableOnSubscribe&lt;T&gt; source)</span> </span>&#123;</span><br><span class="line">    ObjectHelper.requireNonNull(source, <span class="string">"source is null"</span>);</span><br><span class="line">    <span class="keyword">return</span> RxJavaPlugins.onAssembly(<span class="keyword">new</span> ObservableCreate&lt;T&gt;(source));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ObservableCreate</span><span class="params">(ObservableOnSubscribe&lt;T&gt; source)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.source = source;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们也知道，当我们调用  <em>Observable.subscribe()</em> 方法的时候，实际上调用的是 Observable 具体实现的 <code>subscribeActual()</code> 方法。</p>
<p>在此方法中我们看到，为 Observer 建立了一个 <em>CreateEmitter</em>，然后我们的 Observable 就会调用这个 CreateEmitter 来发射数据。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">subscribeActual</span><span class="params">(Observer&lt;? <span class="keyword">super</span> T&gt; observer)</span> </span>&#123;</span><br><span class="line">    CreateEmitter&lt;T&gt; parent = <span class="keyword">new</span> CreateEmitter&lt;T&gt;(observer);</span><br><span class="line">    observer.onSubscribe(parent);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        source.subscribe(parent);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">        Exceptions.throwIfFatal(ex);</span><br><span class="line">        parent.onError(ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上面代码的过程我们可以总结出：</p>
<ol>
<li>Observable.create(ObservableOnSubscribe) 会返回一个 Observable 对象，同时内部建立一个 CreateEmitter。</li>
<li>当返回对象的 <code>subscribe()</code>方法被调用时，会将　CreateEmitter 作为 Disposable 递交给 Observer。（Disposable 与 Subscription 作用一致，不过是为了避免概念上的混淆）。</li>
<li>返回对象对调用 ObservableOnSubscribe.subscribe(CreateEmitter) 开始我们的发射逻辑。</li>
<li>CreateEmitter 持有了 Observer ，所以其可以将信号递交给 Observer。</li>
</ol>
<p>事实上，当我们调用 <code>CreateEmitter.onNext()</code> 的时候，最终还是调用的 <code>Observer.onNext()</code>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CreateEmitter</span>&lt;<span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class">   <span class="keyword">extends</span> <span class="title">AtomicReference</span>&lt;<span class="title">Disposable</span>&gt;</span></span><br><span class="line"><span class="class">   <span class="keyword">implements</span> <span class="title">ObservableEmitter</span>&lt;<span class="title">T</span>&gt;, <span class="title">Disposable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">3434801548987643227L</span>;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">final</span> Observer&lt;? <span class="keyword">super</span> T&gt; observer;</span><br><span class="line"></span><br><span class="line">       CreateEmitter(Observer&lt;? <span class="keyword">super</span> T&gt; observer) &#123;</span><br><span class="line">           <span class="keyword">this</span>.observer = observer;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="meta">@Override</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">if</span> (t == <span class="keyword">null</span>) &#123;</span><br><span class="line">               onError(<span class="keyword">new</span> NullPointerException(<span class="string">"onNext called with null. Null values are generally not allowed in 2.x operators and sources."</span>));</span><br><span class="line">               <span class="keyword">return</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (!isDisposed()) &#123;</span><br><span class="line">               observer.onNext(t);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="meta">@Override</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable t)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">if</span> (!tryOnError(t)) &#123;</span><br><span class="line">               RxJavaPlugins.onError(t);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// .....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个并不是以 <em>Subscription</em> <code>request()</code>来请求数据的欸。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ol>
<li>Observable<t> 需要实现 <code>protected abstract void subscribeActual(Observer&lt;? super T&gt; var1);</code> 方法。</t></li>
<li>在 subscribeActual 需要实现是 Disposable 来通知 Observer 的具体逻辑。</li>
</ol>
<h1 id="Subscription-与-Disposable"><a href="#Subscription-与-Disposable" class="headerlink" title="Subscription 与 Disposable"></a>Subscription 与 Disposable</h1><p>在 RxJava 1 中， rx.Subscription 响应流及源生命周期管理，也即是取消对一个序列的订阅和释放一般资源（如调度任务）。</p>
<p>Reactive-Streams 规范使用了这个名字来指明一个 source 与 consumer 间的交互点：<em>org.reactivestreams.Subscription</em>允许从上游请求数据和取消这个序列。</p>
<p>为了避免名称上的冲突，所以将 rx.Subscription 更名为 io.reactivex.Disposable。</p>
<p><script src="https://unpkg.com/viz.js@2.1.2/viz.js"></script><script src="https://unpkg.com/viz.js@2.1.2/full.render.js"></script><script>let graphviz_engines = ["circo",    "dot",    "fdp",    "neato",    "osage",    "twopi"];function doGraphviz(engine) {    let domAllDot = document.querySelectorAll('.language-' + engine);    for (let i = 0; i < domAllDot.length; i++) {        let dom = domAllDot[i];        let graphSource = dom.innerText || dom.textContent;        try {           let viz = new Viz();             viz.renderSVGElement(graphSource, {engine: engine})                 .then(r => {            dom.innerHTML ='';dom.append(r); });        } catch (e) {            console.error("Error when parsing node:", dom, e);        }    }}let init = function () {    for (let i = 0; i < graphviz_engines.length; i++) {        doGraphviz(graphviz_engines[i]);    }};if (typeof window.addEventListener != "undefined") {    window.addEventListener("load", init, false);} else {    window.attachEvent("onload", init);}</script></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"># Java</a>
              <a href="/tags/Android/" rel="tag"># Android</a>
              <a href="/tags/RxJava/" rel="tag"># RxJava</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/Android/View的绘制过程.html" rel="next" title="View的绘制过程">
                  <i class="fa fa-chevron-left"></i> View的绘制过程
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
                <a href="/Android/Retrofit对象的建立及与RxJava的使用.html" rel="prev" title="Retrofit对象的建立及与RxJava的使用">
                  Retrofit对象的建立及与RxJava的使用 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    
  <div class="comments" id="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#背景"><span class="nav-number">1.</span> <span class="nav-text">背景</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Reactive-Streams-基本接口"><span class="nav-number">2.</span> <span class="nav-text">Reactive Streams 基本接口</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Publisher"><span class="nav-number">2.1.</span> <span class="nav-text">Publisher</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Subscriber"><span class="nav-number">2.2.</span> <span class="nav-text">Subscriber</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Subscription"><span class="nav-number">2.3.</span> <span class="nav-text">Subscription</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#工作过程"><span class="nav-number">3.</span> <span class="nav-text">工作过程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Observable"><span class="nav-number">4.</span> <span class="nav-text">Observable</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#基本类"><span class="nav-number">5.</span> <span class="nav-text">基本类</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Flowable-例子"><span class="nav-number">6.</span> <span class="nav-text">Flowable 例子</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Observable-例子"><span class="nav-number">7.</span> <span class="nav-text">Observable 例子</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Observerable-create"><span class="nav-number">8.</span> <span class="nav-text">Observerable.create()</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#总结"><span class="nav-number">9.</span> <span class="nav-text">总结</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Subscription-与-Disposable"><span class="nav-number">10.</span> <span class="nav-text">Subscription 与 Disposable</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Gowa2017 Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">311</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">133</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/gowa2017" title="GitHub → https://github.com/gowa2017" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:shouzheng.zhang@gmail.com" title="E-Mail → mailto:shouzheng.zhang@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-json"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Gowa2017 Zhang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.5.0
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  




  
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.js"></script><script src="/js/algolia-search.js"></script>














  

  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://gowa-1.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  function loadComments() {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: {page: {
            url: "https://gowa.club/RxJava/RxJava的一些基本概念及文档.html",
            identifier: "RxJava/RxJava的一些基本概念及文档.html",
            title: "RxJava的一些基本概念及文档"
          }
        }
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://gowa-1.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  }
    window.addEventListener('load', loadComments, false);
</script>

</body>
</html>
